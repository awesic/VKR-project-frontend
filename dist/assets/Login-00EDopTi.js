import{r as l,n as N,p as y,i as F,q as L,j as s,k as S,m as v,h as E,I as c,B as I,L as k}from"./index-GvI2urAZ.js";import{z as r,u as C,F as q,a as P,b as m,c as d,d as x,e as u,I as j,E as B,f as G,t as R}from"./form-hLCCx6LD.js";import{L as T}from"./loader-2-tsgD-EsW.js";const _=r.object({email:r.string({required_error:"Это поле обязательно для заполнения"}).email({message:"Неправильный формат почты"}),password:r.string({required_error:"Это поле обязательно для заполнения"}).min(3,{message:"Это поле обязательно для заполнения"})}),Q=()=>{const[n,h]=l.useState(!1),f=N(),p=y(),a=C({resolver:R(_),defaultValues:{email:"",password:""}}),{isSuccess:o}=F(),{mutate:g,isPending:i,isError:w}=L(),b=e=>{g(e)};return l.useEffect(()=>{var e,t;o&&p(((t=(e=f.state)==null?void 0:e.from)==null?void 0:t.pathname)||"/home")},[o]),s.jsx(S,{title:"Вход",content:"Страница входа",children:s.jsxs(v,{className:"justify-content-center align-items-center flex flex-column vh-100 mx-auto",children:[s.jsx("div",{className:"justify-content-center align-items-center fs-1 fw-bold",children:s.jsx("div",{children:"Вход"})}),s.jsx(q,{...a,children:s.jsxs("form",{onSubmit:a.handleSubmit(b),className:"space-y-3 mw-100 form-width text-center",children:[s.jsx(E,{}),w&&s.jsx(P,{className:"text-start text-red-600",children:"Неправильная почта или пароль!"}),s.jsx(m,{control:a.control,name:"email",render:({field:e})=>s.jsxs(d,{children:[s.jsx(x,{children:s.jsx(c,{placeholder:"Почта",...e})}),s.jsx(u,{})]})}),s.jsx(m,{control:a.control,name:"password",render:({field:e})=>s.jsxs(d,{children:[s.jsxs(j,{className:"flex-nowrap",children:[s.jsx(x,{children:s.jsx(c,{placeholder:"Пароль",type:n?"text":"password",...e})}),s.jsx(j.Text,{onClick:()=>h(t=>!t),children:n?s.jsx(B,{}):s.jsx(G,{})})]}),s.jsx(u,{})]})}),s.jsxs(I,{type:"submit",disabled:i,className:"rounded-5 mt-4",children:[i?s.jsx(T,{className:"mr-2 h-4 w-4 animate-spin"}):null,"ВОЙТИ"]})]})}),s.jsx("div",{className:"mt-3",children:s.jsxs("p",{className:"mb-0 text-center",children:["Еще нет аккаунта?"," ",s.jsx(k,{to:"/sign-up",className:"text-primary fw-bold",children:"Зарегистрируйтесь"})]})})]})})};export{Q as default};
